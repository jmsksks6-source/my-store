<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Elite Store | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --main: #111; --gold: #c5a059; --bg: #f9f9f9; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: #333; overflow-x: hidden; }
        .screen { display: none; padding: 15px; min-height: 90vh; }
        .active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        header { background: var(--main); color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; z-index:1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .badge { background: var(--gold); color: black; font-size: 11px; padding: 2px 7px; border-radius: 50%; position: absolute; top: -8px; right: -10px; font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; margin-top: 15px; }
        .product-card { background: white; border-radius: 15px; padding: 10px; border: 1px solid #eee; text-align: center; position: relative; transition: 0.3s; }
        .product-card img { width: 100%; height: 160px; object-fit: cover; border-radius: 12px; }
        .status-tag { position: absolute; top: 10px; right: 10px; padding: 4px 8px; border-radius: 8px; font-size: 10px; font-weight: bold; z-index: 5; }
        .available { background: #d4edda; color: #155724; }
        .out { background: #f8d7da; color: #721c24; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; box-sizing: border-box; }
        .btn { border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        .btn-gold { background: var(--gold); color: black; }
        .btn-black { background: var(--main); color: white; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center; padding: 15px; }
        .modal-content { background: white; width: 100%; max-width: 420px; padding: 25px; border-radius: 20px; max-height: 85vh; overflow-y: auto; position: relative; }
        .qty-box { display: flex; align-items: center; justify-content: space-between; background: #f0f0f0; padding: 8px 15px; border-radius: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<div id="login-screen" class="screen">
    <div style="text-align: center; margin-top: 80px;">
        <h1 style="color: var(--main); letter-spacing: 4px;">ELITE STORE</h1>
        <div style="max-width: 320px; margin: 40px auto; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1);">
            <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
            <input type="text" id="log-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="email" id="log-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            <input type="password" id="log-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
            <button class="btn btn-black" onclick="handleLogin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø±</button>
        </div>
    </div>
</div>

<div id="app-screen" class="screen">
    <header>
        <span onclick="showPage('home')" style="font-weight: bold; font-size: 20px; cursor: pointer;">ELITE</span>
        <div style="display: flex; gap: 20px; align-items: center;">
            <span onclick="showPage('orders')" style="cursor: pointer; font-size: 18px;">ğŸ“‹</span>
            <div style="position: relative; cursor: pointer;" onclick="openCart()">ğŸ›’ <span class="badge" id="cart-count">0</span></div>
            <span id="admin-icon" onclick="showPage('admin')" style="display: none; cursor: pointer; color: var(--gold);">âš™ï¸</span>
        </div>
    </header>

    <div id="home-page" class="page">
        <div class="grid" id="p-grid"></div>
    </div>

    <div id="admin-page" class="page" style="display: none;">
        <div style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
            <h4>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„Ù…Ø®Ø²Ù†</h4>
            <input type="text" id="adm-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
            <input type="number" id="adm-price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
            <input type="text" id="adm-img" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
            <select id="adm-cat"><option>Ø³Ø§Ø¹Ø§Øª</option><option>Ø¹Ø·ÙˆØ±</option><option>Ù…Ù„Ø§Ø¨Ø³</option><option>Ø£Ø­Ø°ÙŠØ©</option></select>
            <input type="text" id="adm-colors" placeholder="Ø§Ù„Ø£Ù„ÙˆØ§Ù† (Ù…Ø«Ø§Ù„: Ø£Ø³ÙˆØ¯, Ø°Ù‡Ø¨ÙŠ)">
            <input type="text" id="adm-sizes" placeholder="Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
            <button class="btn btn-gold" onclick="addNewProduct()">ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ù†ØªØ¬</button>
        </div>
        <h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h4>
        <div id="admin-inventory-list"></div>
    </div>

    <div id="orders-page" class="page" style="display: none;">
        <h3>Ø³Ø¬Ù„ Ø·Ù„Ø¨Ø§ØªÙƒ</h3>
        <div id="orders-list"></div>
    </div>
</div>

<div id="prod-modal" class="modal"><div class="modal-content" id="prod-modal-body"></div></div>
<div id="cart-modal" class="modal"><div class="modal-content" id="cart-modal-body"></div></div>
<div id="ship-modal" class="modal">
    <div class="modal-content">
        <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
        <input type="text" id="f-fullname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="text" id="f-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (11 Ø±Ù‚Ù…)" maxlength="11" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
        <select id="f-city">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...</option>
            <option>Ø¨ØºØ¯Ø§Ø¯</option><option>Ø§Ù„Ø¨ØµØ±Ø©</option><option>Ù†ÙŠÙ†ÙˆÙ‰</option><option>Ø£Ø±Ø¨ÙŠÙ„</option><option>Ø§Ù„Ù†Ø¬Ù</option>
            <option>ÙƒØ±Ø¨Ù„Ø§Ø¡</option><option>Ø°ÙŠ Ù‚Ø§Ø±</option><option>ÙƒØ±ÙƒÙˆÙƒ</option><option>Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</option><option>Ø¨Ø§Ø¨Ù„</option>
            <option>Ø¯ÙŠØ§Ù„Ù‰</option><option>Ù…ÙŠØ³Ø§Ù†</option><option>Ø§Ù„Ø¯ÙŠÙˆØ§Ù†ÙŠØ©</option><option>ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†</option><option>Ø¯Ù‡ÙˆÙƒ</option>
            <option>Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©</option><option>ÙˆØ§Ø³Ø·</option><option>Ø§Ù„Ù…Ø«Ù†Ù‰</option>
        </select>
        <input type="text" id="f-point" placeholder="Ø£Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©">
        <textarea id="f-notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"></textarea>
        <button class="btn btn-black" id="final-send" onclick="confirmOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
        <button class="btn" style="background:none" onclick="closeModals()">ØªØ±Ø§Ø¬Ø¹</button>
    </div>
</div>

<script>
    emailjs.init("YXDPYRNxazZ45eYWS");

    let db = {
        user: JSON.parse(localStorage.getItem('elite_u')),
        products: JSON.parse(localStorage.getItem('elite_p')) || [
            {id:1, name:"Ø³Ø§Ø¹Ø© Ø±ÙˆÙ„ÙƒØ³ Ø¯ÙŠØª Ø¬Ø³Øª", price:150000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=400", status:"a", colors:"Ø°Ù‡Ø¨ÙŠ,ÙØ¶ÙŠ", sizes:""},
            {id:2, name:"Ø¹Ø·Ø± Ø³ÙˆÙØ§Ø¬ Ø¯ÙŠÙˆØ±", price:95000, cat:"Ø¹Ø·ÙˆØ±", img:"https://images.unsplash.com/photo-1544467316-145c28d46924?w=400", status:"a", colors:"Ø£Ø²Ø±Ù‚", sizes:""},
            {id:3, name:"Ù‡ÙˆØ¯ÙŠ Ù†Ø§ÙŠÙƒ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", price:35000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=400", status:"a", colors:"Ø£Ø³ÙˆØ¯,Ø£Ø¨ÙŠØ¶", sizes:"M,L,XL"},
            {id:4, name:"Ø­Ø°Ø§Ø¡ Ø¬ÙˆØ±Ø¯Ù† Air", price:75000, cat:"Ø£Ø­Ø°ÙŠØ©", img:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400", status:"a", colors:"Ø£Ø­Ù…Ø±", sizes:"41,42,43,44"},
            {id:5, name:"Ø³Ù…Ø§Ø¹Ø© Ø¢Ø¨Ù„ AirPods", price:120000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400", status:"a", colors:"Ø£Ø¨ÙŠØ¶", sizes:""},
            {id:6, name:"Ù†Ø¸Ø§Ø±Ø© Ø±ÙŠØ¨Ø§Ù† Ø´Ù…Ø³ÙŠØ©", price:45000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400", status:"a", colors:"Ø£Ø³ÙˆØ¯", sizes:""},
            {id:7, name:"Ù‚Ù…ÙŠØµ ÙƒÙ„Ø§Ø³ÙŠÙƒ Ù…Ù„ÙƒÙŠ", price:25000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=400", status:"a", colors:"Ø£Ø¨ÙŠØ¶", sizes:"S,M,L"},
            {id:8, name:"Ø³Ø§Ø¹Ø© Ù‡ÙˆØ¨Ù„ÙˆØª Hublot", price:110000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://images.unsplash.com/photo-1548171916-042ad9ef518a?w=400", status:"a", colors:"Ø¨Ù†ÙŠ", sizes:""},
            {id:9, name:"Ø­Ø°Ø§Ø¡ Ø±Ø³Ù…ÙŠ Ø¬Ù„Ø¯", price:55000, cat:"Ø£Ø­Ø°ÙŠØ©", img:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400", status:"a", colors:"Ø£Ø³ÙˆØ¯", sizes:"41,42"},
            {id:10, name:"Ø¹Ø·Ø± ÙƒØ±ÙŠØ¯ Ø£ÙÙŠÙ†ØªÙˆØ³", price:180000, cat:"Ø¹Ø·ÙˆØ±", img:"https://images.unsplash.com/photo-1588405863914-22d7631d1414?w=400", status:"a", colors:"ÙØ¶ÙŠ", sizes:""},
            {id:11, name:"Ø®Ø§ØªÙ… ÙØ¶Ø© Ø±Ø¬Ø§Ù„ÙŠ", price:40000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=400", status:"a", colors:"ÙØ¶ÙŠ", sizes:"19,20,21"},
            {id:12, name:"Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø² Levi's", price:30000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=400", status:"a", colors:"Ø£Ø²Ø±Ù‚", sizes:"32,34,36"},
            {id:13, name:"Ø³Ø§Ø¹Ø© Ø¨Ø§ØªÙŠÙƒ ÙÙŠÙ„ÙŠØ¨", price:250000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://images.unsplash.com/photo-1524592091214-8c97afad3d3a?w=400", status:"a", colors:"ÙØ¶ÙŠ", sizes:""},
            {id:14, name:"Ø­Ù‚ÙŠØ¨Ø© Ø¬Ù„Ø¯ ÙØ§Ø®Ø±Ø©", price:60000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400", status:"a", colors:"Ø¨Ù†ÙŠ", sizes:""},
            {id:15, name:"ØªÙŠØ´ÙŠØ±Øª Ø¨ÙˆÙ„Ùˆ Ù…Ø§Ø±ÙƒØ©", price:22000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://images.unsplash.com/photo-1581655353564-df123a1eb820?w=400", status:"a", colors:"Ø£Ø®Ø¶Ø±", sizes:"M,L"}
        ],
        orders: JSON.parse(localStorage.getItem('elite_o')) || []
    };
    let cart = [];

    function handleLogin() {
        const n = document.getElementById('log-name').value;
        const e = document.getElementById('log-email').value;
        const p = document.getElementById('log-pass').value;
        if(!n || !e || !p) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¦ ÙƒØ§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ„");
        db.user = { name: n, email: e, role: (n === 'admin' && p === 'admin') ? 'admin' : 'user' };
        localStorage.setItem('elite_u', JSON.stringify(db.user));
        startApp();
    }

    function startApp() {
        if(!db.user) return document.getElementById('login-screen').classList.add('active');
        document.getElementById('login-screen').classList.remove('active');
        document.getElementById('app-screen').classList.add('active');
        if(db.user.role === 'admin') document.getElementById('admin-icon').style.display = 'block';
        renderProducts();
    }

    function renderProducts() {
        document.getElementById('p-grid').innerHTML = db.products.map(p => `
            <div class="product-card">
                <div class="status-tag ${p.status==='a'?'available':'out'}">${p.status==='a'?'Ù…ØªÙˆÙØ±':'Ù†Ø§ÙØ°'}</div>
                <img src="${p.img}">
                <div style="font-weight:bold; height:40px; margin-top:10px;">${p.name}</div>
                <div style="color:var(--gold); font-weight:bold; font-size:18px;">${p.price.toLocaleString()} Ø¯.Ø¹</div>
                <button class="btn btn-black" style="margin-top:10px;" onclick="openP(${p.id})">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
            </div>`).join('');
    }

    function openP(id) {
        const p = db.products.find(x => x.id === id);
        if(p.status !== 'a') return alert("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹");
        document.getElementById('prod-modal').style.display = 'flex';
        document.getElementById('prod-modal-body').innerHTML = `
            <h3>${p.name}</h3>
            <label>Ø§Ù„Ù„ÙˆÙ†:</label><select id="sel-color">${p.colors.split(',').map(c => `<option>${c.trim()}</option>`).join('')}</select>
            ${p.sizes ? `<label>Ø§Ù„Ù‚ÙŠØ§Ø³:</label><select id="sel-size">${p.sizes.split(',').map(s => `<option>${s.trim()}</option>`).join('')}</select>` : ''}
            <button class="btn btn-gold" onclick="addToCart(${p.id})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
            <button class="btn" style="background:none" onclick="closeModals()">Ø¥ØºÙ„Ø§Ù‚</button>`;
    }

    function addToCart(id) {
        const p = db.products.find(x => x.id === id);
        cart.push({ ...p, color: document.getElementById('sel-color').value, size: document.getElementById('sel-size')?.value || '-', qty: 1, cid: Date.now() });
        document.getElementById('cart-count').innerText = cart.length;
        closeModals();
    }

    function openCart() {
        if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
        document.getElementById('cart-modal').style.display = 'flex';
        renderCart();
    }

    function renderCart() {
        const total = cart.reduce((s, i) => s + (i.price * i.qty), 0) + 5000;
        document.getElementById('cart-modal-body').innerHTML = `
            <h3>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
            ${cart.map(i => `
                <div style="border-bottom:1px solid #eee; padding:10px 0;">
                    <b>${i.name} (${i.color})</b><br>
                    <div class="qty-box">
                        <button onclick="changeQty(${i.cid},-1)">-</button> <b>${i.qty}</b> <button onclick="changeQty(${i.cid},1)">+</button>
                        <span style="color:red; cursor:pointer" onclick="delItem(${i.cid})">ğŸ—‘ï¸</span>
                    </div>
                </div>`).join('')}
            <div style="margin-top:15px; font-weight:bold;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total.toLocaleString()} Ø¯.Ø¹</div>
            <button class="btn btn-black" style="margin-top:15px;" onclick="openShipping()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
            <button class="btn" style="background:none" onclick="closeModals()">Ø±Ø¬ÙˆØ¹</button>`;
    }

    function changeQty(cid, v) {
        const i = cart.find(x => x.cid === cid);
        i.qty += v; if(i.qty < 1) return delItem(cid);
        renderCart();
    }

    function delItem(cid) {
        cart = cart.filter(x => x.cid !== cid);
        if(cart.length === 0) closeModals(); else renderCart();
        document.getElementById('cart-count').innerText = cart.length;
    }

    function openShipping() { document.getElementById('cart-modal').style.display = 'none'; document.getElementById('ship-modal').style.display = 'flex'; }

    function confirmOrder() {
        const phone = document.getElementById('f-phone').value;
        const name = document.getElementById('f-fullname').value;
        const city = document.getElementById('f-city').value;
        const point = document.getElementById('f-point').value;
        
        if(!name || phone.length !== 11 || !city || !point) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (11 Ø±Ù‚Ù…)");

        const btn = document.getElementById('final-send');
        btn.disabled = true; btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

        const items = cart.map(i => `${i.name} [${i.color}] x${i.qty}`).join(' , ');
        const total = cart.reduce((s, i) => s + (i.price * i.qty), 0) + 5000;

        emailjs.send("service_ga7ytjo", "template_lgvpsns", {
            from_name: name,
            phone: phone,
            address: `${city} - ${point}`,
            message: `Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ${items} | Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${document.getElementById('f-notes').value} | Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toLocaleString()} Ø¯.Ø¹`,
            title: "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"
        }).then(() => {
            alert("âœ… ØªÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
            db.orders.push({ id: Date.now(), total, time: Date.now(), status: "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©" });
            localStorage.setItem('elite_o', JSON.stringify(db.orders));
            cart = []; location.reload();
        }, () => { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"); btn.disabled = false; });
    }

    function showPage(p) {
        document.querySelectorAll('.page').forEach(x => x.style.display = 'none');
        document.getElementById(p + '-page').style.display = 'block';
        if(p === 'admin') renderAdmin();
        if(p === 'orders') renderOrders();
    }

    function renderAdmin() {
        document.getElementById('admin-inventory-list').innerHTML = db.products.map(p => `
            <div style="display:flex; justify-content:space-between; background:white; padding:12px; border-radius:10px; margin-top:5px; border:1px solid #ddd;">
                <span>${p.name}</span>
                <div>
                    <button onclick="toggleStock(${p.id})" style="color:${p.status==='a'?'green':'red'}">${p.status==='a'?'Ù…ØªÙˆÙØ±':'Ù†Ø§ÙØ°'}</button>
                    <button onclick="deleteP(${p.id})" style="color:red; margin-left:10px;">Ø­Ø°Ù</button>
                </div>
            </div>`).join('') || "Ø§Ù„Ù…Ø®Ø²Ù† ÙØ§Ø±Øº";
    }

    function toggleStock(id) {
        const p = db.products.find(x => x.id === id);
        p.status = p.status === 'a' ? 'o' : 'a';
        saveP(); renderAdmin(); renderProducts();
    }

    function deleteP(id) {
        if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ØŸ")) { db.products = db.products.filter(x => x.id !== id); saveP(); renderAdmin(); renderProducts(); }
    }

    function addNewProduct() {
        const n = document.getElementById('adm-name').value;
        const pr = document.getElementById('adm-price').value;
        if(!n || !pr) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        db.products.unshift({ id: Date.now(), name: n, price: parseInt(pr), img: document.getElementById('adm-img').value || 'https://via.placeholder.com/400', cat: document.getElementById('adm-cat').value, status: 'a', colors: document.getElementById('adm-colors').value || 'Ø£Ø³Ø§Ø³ÙŠ', sizes: document.getElementById('adm-sizes').value || '' });
        saveP(); renderAdmin(); renderProducts();
    }

    function renderOrders() {
        document.getElementById('orders-list').innerHTML = db.orders.reverse().map(o => `
            <div style="background:white; padding:15px; border-radius:12px; border-right:5px solid var(--main); margin-bottom:10px;">
                <b>Ø·Ù„Ø¨ #${o.id.toString().slice(-4)}</b><br>
                Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${o.total.toLocaleString()} Ø¯.Ø¹ | Ø§Ù„Ø­Ø§Ù„Ø©: ${o.status}
            </div>`).join('') || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©";
    }

    function saveP() { localStorage.setItem('elite_p', JSON.stringify(db.products)); }
    function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }

    window.onload = startApp;
</script>
</body>
</html>
