<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Elite Store Pro | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --primary: #007bff; --success: #28a745; --danger: #dc3545; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; background: var(--light); color: #333; }
        .screen { display: none; padding: 15px; }
        .active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        header { background: white; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top:0; z-index:100; }
        .badge { background: var(--danger); color: white; font-size: 11px; padding: 2px 6px; border-radius: 50%; position: absolute; top: -5px; right: -10px; }
        .cats-wrapper { display: flex; gap: 10px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }
        .cat-card { background: white; padding: 8px 15px; border-radius: 20px; border: 1px solid #ddd; cursor: pointer; white-space: nowrap; }
        .cat-card.active-cat { background: var(--primary); color: white; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; margin-top: 15px; }
        .product { background: white; border-radius: 15px; padding: 12px; border: 1px solid #eee; text-align: center; position: relative; }
        .product img { width: 100%; height: 160px; object-fit: cover; border-radius: 10px; }
        .out-of-stock-tag { position: absolute; top: 10px; right: 10px; background: red; color: white; padding: 2px 8px; border-radius: 5px; font-size: 12px; z-index: 5; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 90%; max-width: 450px; padding: 20px; border-radius: 20px; max-height: 85vh; overflow-y: auto; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; }
        .btn { border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; margin-top: 8px; }
        .btn-p { background: var(--primary); color: white; }
        .btn-s { background: var(--success); color: white; }
        .btn-d { background: var(--danger); color: white; }
        .order-card { background: white; padding: 15px; border-radius: 15px; margin-bottom: 10px; border-right: 5px solid var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

<div id="auth-screen" class="screen active">
    <div style="text-align: center; margin-top: 100px;">
        <h1 style="color:var(--primary)">ELITE STORE</h1>
        <div style="max-width:320px; margin:auto; background:white; padding:30px; border-radius:20px;">
            <input type="text" id="user-name" placeholder="Ø§Ù„Ø§Ø³Ù…">
            <input type="password" id="user-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
            <button class="btn btn-p" onclick="register()">Ø¯Ø®ÙˆÙ„</button>
            <p style="font-size: 12px; color: gray;">(admin/admin) Ù„Ù„Ø¯Ø®ÙˆÙ„ ÙƒØªØ§Ø¬Ø±</p>
        </div>
    </div>
</div>

<div id="app" class="screen">
    <header>
        <b onclick="showScreen('home')" style="cursor:pointer; font-size: 20px;">ELITE</b>
        <div style="display:flex; gap:18px; align-items:center;">
            <span onclick="showScreen('orders')" style="cursor:pointer; font-size: 18px;">ğŸ“‹</span>
            <div style="position:relative; cursor:pointer;" onclick="openCart()">ğŸ›’ <span class="badge" id="cart-count">0</span></div>
            <span id="admin-tag" onclick="showScreen('admin')" style="display:none; color:var(--primary); cursor:pointer; font-weight:bold;">âš™ï¸ Ø§Ù„ØªØ§Ø¬Ø±</span>
        </div>
    </header>

    <div id="home-screen" class="screen active">
        <div class="cats-wrapper">
            <div class="cat-card active-cat" onclick="filterBy('Ø§Ù„ÙƒÙ„', event)">Ø§Ù„ÙƒÙ„</div>
            <div class="cat-card" onclick="filterBy('Ø³Ø§Ø¹Ø§Øª', event)">Ø³Ø§Ø¹Ø§Øª</div>
            <div class="cat-card" onclick="filterBy('Ù…Ù„Ø§Ø¨Ø³', event)">Ù…Ù„Ø§Ø¨Ø³</div>
            <div class="cat-card" onclick="filterBy('Ø£Ø­Ø°ÙŠØ©', event)">Ø£Ø­Ø°ÙŠØ©</div>
            <div class="cat-card" onclick="filterBy('Ø¹Ø·ÙˆØ±', event)">Ø¹Ø·ÙˆØ±</div>
            <div class="cat-card" onclick="filterBy('Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', event)">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</div>
        </div>
        <div class="grid" id="products-grid"></div>
    </div>

    <div id="orders-screen" class="screen">
        <h3>Ø·Ù„Ø¨Ø§ØªÙŠ</h3>
        <div id="my-orders-list"></div>
    </div>

    <div id="admin-screen" class="screen">
        <div style="background:white; padding:15px; border-radius:15px; border:1px solid #ddd;">
            <h4>Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬</h4>
            <input type="text" id="adm-title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
            <input type="number" id="adm-price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
            <input type="text" id="adm-img" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
            <select id="adm-cat">
                <option>Ø³Ø§Ø¹Ø§Øª</option><option>Ù…Ù„Ø§Ø¨Ø³</option><option>Ø£Ø­Ø°ÙŠØ©</option><option>Ø¹Ø·ÙˆØ±</option><option>Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</option>
            </select>
            <input type="text" id="adm-colors" placeholder="Ø§Ù„Ø£Ù„ÙˆØ§Ù† (Ù…Ø«Ø§Ù„: Ø£Ø³ÙˆØ¯,Ø£Ø­Ù…Ø±)">
            <input type="text" id="adm-sizes" placeholder="Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª (Ù…Ø«Ø§Ù„: M,L,XL)">
            <button class="btn btn-p" onclick="adminSaveProduct()">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
        </div>
        <hr>
        <h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
        <div id="admin-list"></div>
    </div>
</div>

<div id="opt-modal" class="modal">
    <div class="modal-content">
        <h3 id="opt-title"></h3>
        <label>Ø§Ù„Ù„ÙˆÙ†:</label><select id="opt-color"></select>
        <div id="size-area"><label>Ø§Ù„Ù‚ÙŠØ§Ø³:</label><select id="opt-size"></select></div>
        <button class="btn btn-p" onclick="confirmAddToCart()">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
        <button class="btn" onclick="closeModals()">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-content">
        <h3>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h3>
        <div id="cart-items"></div>
        <hr>
        <div id="total-price-div"></div>
        <button class="btn btn-p" onclick="openCheckout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
        <button class="btn" onclick="closeModals()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<div id="checkout-modal" class="modal">
    <div class="modal-content">
        <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
        <input type="text" id="f-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
        <select id="f-city"><option value="">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...</option><option>Ø¨ØºØ¯Ø§Ø¯</option><option>Ø§Ù„Ø¨ØµØ±Ø©</option><option>Ù†ÙŠÙ†ÙˆÙ‰</option><option>Ø£Ø±Ø¨ÙŠÙ„</option><option>Ø§Ù„Ù†Ø¬Ù</option><option>ÙƒØ±Ø¨Ù„Ø§Ø¡</option><option>Ø°ÙŠ Ù‚Ø§Ø±</option><option>ÙƒØ±ÙƒÙˆÙƒ</option><option>Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</option><option>Ø¨Ø§Ø¨Ù„</option><option>Ø¯ÙŠØ§Ù„Ù‰</option><option>Ù…ÙŠØ³Ø§Ù†</option><option>Ø§Ù„Ø¯ÙŠÙˆØ§Ù†ÙŠØ©</option><option>ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†</option><option>Ø¯Ù‡ÙˆÙƒ</option><option>Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©</option><option>ÙˆØ§Ø³Ø·</option><option>Ø§Ù„Ù…Ø«Ù†Ù‰</option></select>
        <input type="text" id="f-addr" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
        <select id="f-pay" onchange="document.getElementById('e-pay-info').style.display = this.value=='e'?'block':'none'">
            <option value="c">Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
            <option value="e">Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø²ÙŠÙ† ÙƒØ§Ø´ / Ø¢Ø³ÙŠØ§)</option>
        </select>
        <div id="e-pay-info" style="display:none; background:#fff3cd; padding:10px; border-radius:10px; font-size:12px;">
            Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù€: 07800000000 Ø«Ù… Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨
        </div>
        <button class="btn btn-s" id="final-btn" onclick="finishOrder()">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ âœ…</button>
        <button class="btn" onclick="closeModals()">ØªØ±Ø§Ø¬Ø¹</button>
    </div>
</div>

<script>
    emailjs.init("YXDPYRNxazZ45eYWS");

    // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø³Ù†Ø© Ø¨Ù€ 15 Ù…Ù†ØªØ¬ Ù…Ù†ÙˆØ¹
    let defaultProducts = [
        {id:1, title:"Ø³Ø§Ø¹Ø© Ultra 2", price:35000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://picsum.photos/id/175/400/400", status:"a", colors:"ÙØ¶ÙŠ,Ø£Ø³ÙˆØ¯", sizes:""},
        {id:2, title:"ØªÙŠØ´ÙŠØ±Øª ØµÙŠÙÙŠ", price:15000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://picsum.photos/id/2/400/400", status:"a", colors:"Ø£Ø¨ÙŠØ¶,Ø£Ø²Ø±Ù‚", sizes:"M,L,XL"},
        {id:3, title:"Ø­Ø°Ø§Ø¡ Ø³Ø¨ÙˆØ±Øª N", price:45000, cat:"Ø£Ø­Ø°ÙŠØ©", img:"https://picsum.photos/id/103/400/400", status:"a", colors:"Ø£Ø³ÙˆØ¯,Ø±ØµØ§ØµÙŠ", sizes:"40,41,42,43"},
        {id:4, title:"Ø¹Ø·Ø± Ø¯ÙŠÙˆØ± Ø³ÙˆÙØ§Ø¬", price:65000, cat:"Ø¹Ø·ÙˆØ±", img:"https://picsum.photos/id/11/400/400", status:"a", colors:"Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ†", sizes:""},
        {id:5, title:"Ø³Ù…Ø§Ø¹Ø© Ø¨Ù„ÙˆØªÙˆØ« Pro", price:25000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://picsum.photos/id/12/400/400", status:"a", colors:"Ø£Ø¨ÙŠØ¶,Ø£Ø³ÙˆØ¯", sizes:""},
        {id:6, title:"Ù†Ø¸Ø§Ø±Ø© Ø´Ù…Ø³ÙŠØ© Ray-Ban", price:20000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://picsum.photos/id/13/400/400", status:"a", colors:"Ø£Ø³ÙˆØ¯,Ø¨Ù†ÙŠ", sizes:""},
        {id:7, title:"Ù‚Ù…ÙŠØµ Ø±Ø³Ù…ÙŠ", price:25000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://picsum.photos/id/14/400/400", status:"a", colors:"Ø£Ø¨ÙŠØ¶,ÙƒØ­Ù„ÙŠ", sizes:"L,XL"},
        {id:8, title:"Ø³Ø§Ø¹Ø© Ø±ÙˆÙ„ÙƒØ³ ÙƒÙ„Ø§Ø³ÙŠÙƒ", price:120000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://picsum.photos/id/15/400/400", status:"a", colors:"Ø°Ù‡Ø¨ÙŠ,ÙØ¶ÙŠ", sizes:""},
        {id:9, title:"Ø­Ø°Ø§Ø¡ ÙƒÙ„Ø§Ø³ÙŠÙƒ Ø¬Ù„Ø¯", price:55000, cat:"Ø£Ø­Ø°ÙŠØ©", img:"https://picsum.photos/id/16/400/400", status:"a", colors:"Ø¨Ù†ÙŠ,Ø£Ø³ÙˆØ¯", sizes:"41,42,43"},
        {id:10, title:"Ø¹Ø·Ø± Ø´Ø§Ù†ÙŠÙ„", price:75000, cat:"Ø¹Ø·ÙˆØ±", img:"https://picsum.photos/id/17/400/400", status:"a", colors:"Ø´ÙØ§Ù", sizes:""},
        {id:11, title:"Ø®Ø§ØªÙ… ÙØ¶Ø© 925", price:30000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://picsum.photos/id/18/400/400", status:"a", colors:"ÙØ¶ÙŠ", sizes:"7,8,9"},
        {id:12, title:"Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø²", price:22000, cat:"Ù…Ù„Ø§Ø¨Ø³", img:"https://picsum.photos/id/19/400/400", status:"a", colors:"Ø£Ø²Ø±Ù‚,Ø£Ø³ÙˆØ¯", sizes:"30,32,34"},
        {id:13, title:"Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© G-Shock", price:40000, cat:"Ø³Ø§Ø¹Ø§Øª", img:"https://picsum.photos/id/20/400/400", status:"a", colors:"Ø£Ø³ÙˆØ¯,Ø£Ø®Ø¶Ø±", sizes:""},
        {id:14, title:"Ø¹Ø·Ø± Ø¨Ù„Ùˆ Ø´Ø§Ù†ÙŠÙ„", price:80000, cat:"Ø¹Ø·ÙˆØ±", img:"https://picsum.photos/id/21/400/400", status:"a", colors:"Ø£Ø²Ø±Ù‚", sizes:""},
        {id:15, title:"ÙƒØ§Ø¨ Ø³Ø¨ÙˆØ±Øª", price:10000, cat:"Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", img:"https://picsum.photos/id/22/400/400", status:"a", colors:"Ø£Ø­Ù…Ø±,Ø£Ø³ÙˆØ¯", sizes:""}
    ];

    let db = {
        user: JSON.parse(localStorage.getItem('elite_user')),
        products: JSON.parse(localStorage.getItem('elite_prods')) || defaultProducts,
        orders: JSON.parse(localStorage.getItem('elite_orders')) || []
    };
    let cart = [];
    let tempProd = null;

    function register() {
        const n = document.getElementById('user-name').value;
        const p = document.getElementById('user-pass').value;
        if(!n) return alert("Ø§Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù…");
        db.user = { name: n, role: (n === 'admin' && p === 'admin') ? 'admin' : 'user' };
        localStorage.setItem('elite_user', JSON.stringify(db.user));
        initApp();
    }

    function initApp() {
        if(!db.user) return;
        document.getElementById('auth-screen').classList.remove('active');
        document.getElementById('app').classList.add('active');
        if(db.user.role === 'admin') document.getElementById('admin-tag').style.display = 'inline';
        renderProducts();
    }

    function renderProducts(filter = 'Ø§Ù„ÙƒÙ„') {
        const grid = document.getElementById('products-grid');
        grid.innerHTML = '';
        db.products.filter(p => filter === 'Ø§Ù„ÙƒÙ„' || p.cat === filter).forEach(p => {
            grid.innerHTML += `
                <div class="product">
                    ${p.status !== 'a' ? '<div class="out-of-stock-tag">Ù†Ø§ÙØ°</div>' : ''}
                    <img src="${p.img}">
                    <div style="font-weight:bold; margin-top:5px;">${p.title}</div>
                    <div style="color:red; font-weight:bold;">${p.price.toLocaleString()} Ø¯.Ø¹</div>
                    <button class="btn btn-p" onclick="openOptions(${p.id})">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
                </div>`;
        });
    }

    function filterBy(cat, e) {
        document.querySelectorAll('.cat-card').forEach(c => c.classList.remove('active-cat'));
        e.target.classList.add('active-cat');
        renderProducts(cat);
    }

    function openOptions(id) {
        tempProd = db.products.find(p => p.id === id);
        if(tempProd.status !== 'a') return alert("Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ø§ÙØ° Ø­Ø§Ù„ÙŠØ§Ù‹");
        document.getElementById('opt-modal').style.display = 'flex';
        document.getElementById('opt-title').innerText = tempProd.title;
        document.getElementById('opt-color').innerHTML = tempProd.colors.split(',').map(c => `<option>${c}</option>`).join('');
        const sa = document.getElementById('size-area');
        if(tempProd.sizes) {
            sa.style.display = 'block';
            document.getElementById('opt-size').innerHTML = tempProd.sizes.split(',').map(s => `<option>${s}</option>`).join('');
        } else { sa.style.display = 'none'; }
    }

    function confirmAddToCart() {
        cart.push({ ...tempProd, choiceColor: document.getElementById('opt-color').value, choiceSize: document.getElementById('opt-size').value || 'N/A', cid: Date.now() });
        document.getElementById('cart-count').innerText = cart.length;
        closeModals();
    }

    function openCart() {
        if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
        document.getElementById('cart-modal').style.display = 'flex';
        renderCart();
    }

    function renderCart() {
        const list = document.getElementById('cart-items');
        list.innerHTML = cart.map(i => `
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>${i.title} (${i.choiceColor})</span>
                <span style="color:red; cursor:pointer" onclick="removeFromCart(${i.cid})">ğŸ—‘ï¸</span>
            </div>`).join('');
        const total = cart.reduce((s,i) => s + i.price, 0) + 5000;
        document.getElementById('total-price-div').innerHTML = `<b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„: ${total.toLocaleString()} Ø¯.Ø¹</b>`;
    }

    function removeFromCart(cid) {
        cart = cart.filter(i => i.cid !== cid);
        if(cart.length === 0) closeModals(); else renderCart();
        document.getElementById('cart-count').innerText = cart.length;
    }

    function openCheckout() {
        document.getElementById('cart-modal').style.display = 'none';
        document.getElementById('checkout-modal').style.display = 'flex';
    }

    function finishOrder() {
        const phone = document.getElementById('f-phone').value;
        const city = document.getElementById('f-city').value;
        if(!phone || !city) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¦ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

        const btn = document.getElementById('final-btn');
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."; btn.disabled = true;

        let itemsInfo = cart.map(i => `- ${i.title} (${i.choiceColor}/${i.choiceSize})`).join('\n');
        let total = cart.reduce((s,i) => s + i.price, 0) + 5000;

        const params = {
            from_name: db.user.name,
            phone: phone,
            address: `${city} - ${document.getElementById('f-addr').value}`,
            message: `Ø§Ù„Ø·Ù„Ø¨:\n${itemsInfo}\nØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¯.Ø¹\nØ§Ù„Ø¯ÙØ¹: ${document.getElementById('f-pay').value}`
        };

        emailjs.send("service_ga7ytjo", "template_lgvpsns", params)
        .then(() => {
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!");
            const newOrder = { id: Date.now(), user: db.user.name, total: total, time: Date.now(), items: [...cart] };
            db.orders.push(newOrder);
            localStorage.setItem('elite_orders', JSON.stringify(db.orders));
            cart = []; document.getElementById('cart-count').innerText = 0;
            location.reload();
        }, () => { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"); btn.disabled = false; btn.innerText = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"; });
    }

    // Ù†Ø¸Ø§Ù… Ø¹Ø±Ø¶ ÙˆØ¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† 100%)
    function renderMyOrders() {
        const list = document.getElementById('my-orders-list');
        const my = db.orders.filter(o => o.user === db.user.name);
        if(my.length === 0) { list.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</p>"; return; }
        
        list.innerHTML = my.reverse().map(o => {
            const passed = (Date.now() - o.time) / 1000 / 60 / 60;
            const canCancel = passed < 2; // Ù…ØªØ§Ø­ Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹ØªÙŠÙ†
            return `
                <div class="order-card">
                    <b>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: #${o.id.toString().slice(-4)}</b><br>
                    Ø§Ù„Ù…Ø¨Ù„Øº: ${o.total.toLocaleString()} Ø¯.Ø¹<br>
                    Ø§Ù„ÙˆÙ‚Øª: ${new Date(o.time).toLocaleString('ar-EG')}<br>
                    ${canCancel ? `<button class="btn btn-d" style="width:auto; padding:5px 15px;" onclick="cancelOrder(${o.id})">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨</button>` : '<small style="color:gray">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¥Ù„ØºØ§Ø¡ (Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª)</small>'}
                </div>`;
        }).join('');
    }

    function cancelOrder(id) {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŸ")) {
            db.orders = db.orders.filter(o => o.id !== id);
            localStorage.setItem('elite_orders', JSON.stringify(db.orders));
            renderMyOrders();
        }
    }

    // Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©
    function adminSaveProduct() {
        const title = document.getElementById('adm-title').value;
        const price = parseInt(document.getElementById('adm-price').value);
        if(!title || !price) return alert("Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©");

        db.products.unshift({
            id: Date.now(),
            title: title,
            price: price,
            cat: document.getElementById('adm-cat').value,
            img: document.getElementById('adm-img').value || 'https://via.placeholder.com/150',
            colors: document.getElementById('adm-colors').value || 'Ø£Ø³Ø§Ø³ÙŠ',
            sizes: document.getElementById('adm-sizes').value || '',
            status: 'a'
        });
        localStorage.setItem('elite_prods', JSON.stringify(db.products));
        alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
        renderAdminList(); renderProducts();
    }

    function renderAdminList() {
        const list = document.getElementById('admin-list');
        list.innerHTML = db.products.map(p => `
            <div style="background:white; padding:10px; margin-bottom:5px; border-radius:10px; display:flex; justify-content:space-between; align-items:center;">
                <span>${p.title}</span>
                <div>
                    <button onclick="toggleStatus(${p.id})">${p.status=='a'?'Ù†ÙØ°':'ØªÙˆÙØ±'}</button>
                    <button onclick="deleteProd(${p.id})" style="color:red">Ø­Ø°Ù</button>
                </div>
            </div>`).join('');
    }

    function toggleStatus(id) {
        const p = db.products.find(x => x.id === id);
        p.status = p.status === 'a' ? 'o' : 'a';
        localStorage.setItem('elite_prods', JSON.stringify(db.products));
        renderAdminList(); renderProducts();
    }

    function deleteProd(id) {
        if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ØŸ")) {
            db.products = db.products.filter(p => p.id !== id);
            localStorage.setItem('elite_prods', JSON.stringify(db.products));
            renderAdminList(); renderProducts();
        }
    }

    function showScreen(scr) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(scr + '-screen').classList.add('active');
        if(scr === 'orders') renderMyOrders();
        if(scr === 'admin') renderAdminList();
    }

    function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
    window.onload = initApp;
</script>
</body>
</html>
